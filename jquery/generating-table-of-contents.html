<html>

<head>
    <script type="text/javascript"
            src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js">
    </script>
</head>

<body>

<h1>Title</h1>

<div id="tocDiv">
    <ul id="tocList">

    </ul>
</div>

<h2>Chapter 1</h2>
<h3>Section 1.1</h3>
<h2>Chapter 2</h2>
<h3>Section 2.1</h3>
<h2>Chapter 3</h2>
<h3>Section 3.1</h3>
<h3>Section 3.2</h3>


<script>
    $(document).ready(function () {
        $("#tocList").empty();

        var prevH2Item = null;
        var prevH2List = null;

        var index = 0;
        $("h2, h3").each(function () {

            //insert an anchor to jump to, from the TOC link.
            var anchor = "<a name='" + index + "'></a>";
            $(this).before(anchor);

            var li = "<li><a href='#" + index + "'>" + $(this).text() + "</a></li>";

            if ($(this).is("h2")) {
                prevH2List = $("<ul></ul>");
                prevH2Item = $(li);
                prevH2Item.append(prevH2List);
                prevH2Item.appendTo("#tocList");
            } else {
                prevH2List.append(li);
            }
            index++;
        });

    });
</script>

</body>

</html>